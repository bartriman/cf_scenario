# Plan TestÃ³w - CashFlow Scenarios MVP

## 1. Wprowadzenie i Cele Testowania

### 1.1. Cel dokumentu
Niniejszy dokument przedstawia kompleksowy plan testÃ³w dla aplikacji CashFlow Scenarios - systemu zarzÄ…dzania scenariuszami przepÅ‚ywÃ³w pieniÄ™Å¼nych z moÅ¼liwoÅ›ciÄ… importu danych CSV, analizy finansowej oraz eksportu raportÃ³w.

### 1.2. Cele testowania
- **Zapewnienie jakoÅ›ci:** Weryfikacja poprawnoÅ›ci funkcjonalnoÅ›ci biznesowych
- **BezpieczeÅ„stwo:** Walidacja mechanizmÃ³w autoryzacji i Row Level Security (RLS)
- **WydajnoÅ›Ä‡:** Sprawdzenie efektywnoÅ›ci operacji na duÅ¼ych zbiorach danych
- **StabilnoÅ›Ä‡:** Potwierdzenie odpornoÅ›ci na bÅ‚Ä™dne dane wejÅ›ciowe
- **UÅ¼ytecznoÅ›Ä‡:** Weryfikacja intuicyjnoÅ›ci interfejsu uÅ¼ytkownika
- **ZgodnoÅ›Ä‡:** Sprawdzenie poprawnoÅ›ci dziaÅ‚ania w rÃ³Å¼nych Å›rodowiskach

### 1.3. Zakres projektu
Aplikacja webowa umoÅ¼liwiajÄ…ca:
- ZarzÄ…dzanie wieloma firmami (multi-tenancy)
- Import transakcji finansowych z plikÃ³w CSV
- Tworzenie i zarzÄ…dzanie scenariuszami cash flow
- ModyfikacjÄ™ transakcji poprzez overrides (copy-on-write)
- AnalizÄ™ danych z widokami tygodniowymi i wykresami
- Eksport danych do formatu Excel

## 2. Zakres TestÃ³w

### 2.1. Obszary objÄ™te testami

#### 2.1.1. FunkcjonalnoÅ›ci podstawowe
- âœ… Autentykacja i autoryzacja uÅ¼ytkownikÃ³w
- âœ… ZarzÄ…dzanie profilami uÅ¼ytkownikÃ³w
- âœ… ZarzÄ…dzanie firmami i czÅ‚onkostwem
- âœ… Import plikÃ³w CSV z walidacjÄ…
- âœ… Tworzenie i zarzÄ…dzanie scenariuszami
- âœ… Modyfikacja transakcji (overrides)
- âœ… Widoki analityczne (tygodniowe agregaty, Top-5)
- âœ… Eksport danych do Excel
- âœ… ZarzÄ…dzanie kontami finansowymi

#### 2.1.2. Komponenty techniczne
- âœ… API REST endpoints (Astro API routes)
- âœ… Komponenty React (interactive islands)
- âœ… Komponenty Astro (static content)
- âœ… Walidacja danych (Zod schemas)
- âœ… Warstwa serwisowa (business logic)
- âœ… Baza danych (PostgreSQL/Supabase)
- âœ… RLS policies
- âœ… Database views i funkcje
- âœ… Middleware (autoryzacja)

### 2.2. Obszary wyÅ‚Ä…czone z testÃ³w
- âŒ Infrastruktura DigitalOcean (testy na poziomie platformy)
- âŒ WewnÄ™trzne mechanizmy Supabase Auth
- âŒ Edge Functions Supabase (jeÅ›li nie zaimplementowane)
- âŒ Testy penetracyjne (security audit)
- âŒ Testy dostÄ™pnoÅ›ci WCAG (accessibility audit)

## 3. Typy TestÃ³w do Przeprowadzenia

### 3.1. Testy Jednostkowe (Unit Tests)

**Zakres:**
- Funkcje walidacyjne (Zod schemas)
- Funkcje pomocnicze (utils)
- Parsery CSV
- Kalkulacje finansowe (konwersje walut, agregaty)
- Formatery danych

**Framework:** Vitest
**Coverage target:** 80%

**PrzykÅ‚adowe przypadki testowe:**

#### 3.1.1. Walidacja importu CSV
```typescript
// src/lib/validation/import.validation.test.ts
describe('validateColumnMapping', () => {
  it('powinien zaakceptowaÄ‡ poprawne mapowanie kolumn', () => {
    const mapping = {
      date_due: 'Data',
      direction: 'Typ',
      amount_book_cents: 'Kwota',
      // ...
    };
    expect(() => validateColumnMapping(mapping)).not.toThrow();
  });

  it('powinien odrzuciÄ‡ mapowanie bez wymaganych pÃ³l', () => {
    const mapping = { date_due: 'Data' };
    expect(() => validateColumnMapping(mapping)).toThrow();
  });
});
```

#### 3.1.2. Parsowanie CSV
```typescript
// src/lib/utils/csv-import.test.ts
describe('parseFullCSV', () => {
  it('powinien poprawnie parsowaÄ‡ plik CSV', async () => {
    const file = new File(['Date,Amount\n2025-01-01,100'], 'test.csv');
    const result = await parseFullCSV(file);
    expect(result.headers).toEqual(['Date', 'Amount']);
    expect(result.rows).toHaveLength(1);
  });

  it('powinien odfiltrowaÄ‡ puste wiersze', async () => {
    const file = new File(['Date,Amount\n2025-01-01,100\n,,'], 'test.csv');
    const result = await parseFullCSV(file);
    expect(result.rows).toHaveLength(1);
  });
});
```

#### 3.1.3. Kalkulacje finansowe
```typescript
// src/lib/utils/financial.test.ts
describe('convertCurrency', () => {
  it('powinien konwertowaÄ‡ kwoty wedÅ‚ug podanego kursu', () => {
    const amountCents = 10000; // 100 PLN
    const rate = 0.25; // 1 PLN = 0.25 EUR
    const result = convertCurrency(amountCents, rate);
    expect(result).toBe(2500); // 25 EUR
  });
});
```

### 3.2. Testy Integracyjne (Integration Tests)

**Zakres:**
- Integracja warstwy serwisowej z bazÄ… danych
- PrzepÅ‚yw danych miÄ™dzy komponentami
- Walidacja RLS policies
- API routes z warstwÄ… serwisowÄ…

**Framework:** Vitest + Supabase Test Client
**Åšrodowisko:** Lokalna instancja Supabase

**PrzykÅ‚adowe przypadki testowe:**

#### 3.2.1. Serwis scenariuszy
```typescript
// src/lib/services/scenario.service.test.ts
describe('ScenarioService.createScenario', () => {
  it('powinien utworzyÄ‡ nowy scenariusz bazowy', async () => {
    const scenario = await createScenario(supabase, companyId, {
      import_id: importId,
      dataset_code: 'Q1_2025',
      name: 'Test Scenario',
      start_date: '2025-01-01',
      end_date: '2025-03-31',
    });
    
    expect(scenario.id).toBeDefined();
    expect(scenario.status).toBe('Draft');
  });

  it('powinien rzuciÄ‡ ForbiddenError dla uÅ¼ytkownika spoza firmy', async () => {
    await expect(
      createScenario(otherUserSupabase, companyId, validData)
    ).rejects.toThrow(ForbiddenError);
  });
});
```

#### 3.2.2. Import CSV - end-to-end flow
```typescript
// src/lib/services/import.service.test.ts
describe('Import CSV Flow', () => {
  it('powinien zaimportowaÄ‡ plik CSV i utworzyÄ‡ transakcje', async () => {
    // 1. UtwÃ³rz import
    const importRecord = await createImport(supabase, companyId, 'Q1_2025');
    
    // 2. Dodaj wiersze
    await saveImportRows(supabase, importRecord.id, parsedRows);
    
    // 3. UtwÃ³rz transakcje
    const count = await createTransactionsFromImport(supabase, importRecord.id, companyId);
    
    expect(count).toBeGreaterThan(0);
  });
});
```

#### 3.2.3. RLS Policies
```typescript
// tests/integration/rls.test.ts
describe('Row Level Security', () => {
  it('uÅ¼ytkownik moÅ¼e odczytaÄ‡ tylko scenariusze swojej firmy', async () => {
    const { data } = await user1Supabase
      .from('scenarios')
      .select('*')
      .eq('company_id', company2Id);
    
    expect(data).toHaveLength(0);
  });

  it('uÅ¼ytkownik nie moÅ¼e modyfikowaÄ‡ zablokowanego scenariusza', async () => {
    const { error } = await userSupabase
      .from('scenarios')
      .update({ name: 'New Name' })
      .eq('id', lockedScenarioId);
    
    expect(error).toBeDefined();
  });
});
```

### 3.3. Testy API (API Tests)

**Zakres:**
- Wszystkie endpointy REST API
- Walidacja requestÃ³w i responses
- Kody statusÃ³w HTTP
- ObsÅ‚uga bÅ‚Ä™dÃ³w

**Framework:** Vitest + supertest (lub Astro test utilities)

**PrzykÅ‚adowe przypadki testowe:**

#### 3.3.1. Authentication endpoints
```typescript
// tests/api/auth.test.ts
describe('POST /api/auth/login', () => {
  it('powinien zalogowaÄ‡ uÅ¼ytkownika z poprawnymi danymi', async () => {
    const response = await request(app)
      .post('/api/auth/login')
      .send({ email: 'user@example.com', password: 'password123' });
    
    expect(response.status).toBe(200);
    expect(response.body.session.access_token).toBeDefined();
  });

  it('powinien zwrÃ³ciÄ‡ 401 dla bÅ‚Ä™dnych danych', async () => {
    const response = await request(app)
      .post('/api/auth/login')
      .send({ email: 'user@example.com', password: 'wrong' });
    
    expect(response.status).toBe(401);
  });
});
```

#### 3.3.2. Scenarios endpoints
```typescript
// tests/api/scenarios.test.ts
describe('GET /api/companies/:companyId/scenarios', () => {
  it('powinien zwrÃ³ciÄ‡ listÄ™ scenariuszy', async () => {
    const response = await authenticatedRequest(app)
      .get(`/api/companies/${companyId}/scenarios`);
    
    expect(response.status).toBe(200);
    expect(response.body.scenarios).toBeInstanceOf(Array);
    expect(response.body.pagination).toBeDefined();
  });

  it('powinien filtrowaÄ‡ scenariusze po statusie', async () => {
    const response = await authenticatedRequest(app)
      .get(`/api/companies/${companyId}/scenarios?status=Draft`);
    
    expect(response.body.scenarios.every(s => s.status === 'Draft')).toBe(true);
  });
});

describe('POST /api/companies/:companyId/scenarios', () => {
  it('powinien utworzyÄ‡ nowy scenariusz', async () => {
    const response = await authenticatedRequest(app)
      .post(`/api/companies/${companyId}/scenarios`)
      .send({
        import_id: importId,
        dataset_code: 'Q1_2025',
        name: 'New Scenario',
        start_date: '2025-01-01',
        end_date: '2025-03-31',
      });
    
    expect(response.status).toBe(201);
    expect(response.body.id).toBeDefined();
  });

  it('powinien odrzuciÄ‡ request z bÅ‚Ä™dnymi datami', async () => {
    const response = await authenticatedRequest(app)
      .post(`/api/companies/${companyId}/scenarios`)
      .send({
        import_id: importId,
        dataset_code: 'Q1_2025',
        name: 'Invalid',
        start_date: '2025-03-31',
        end_date: '2025-01-01', // bÅ‚Ä™dna kolejnoÅ›Ä‡
      });
    
    expect(response.status).toBe(400);
  });
});
```

#### 3.3.3. Import endpoints
```typescript
// tests/api/imports.test.ts
describe('POST /api/companies/:companyId/imports', () => {
  it('powinien zaakceptowaÄ‡ poprawny plik CSV', async () => {
    const response = await authenticatedRequest(app)
      .post(`/api/companies/${companyId}/imports`)
      .send({
        dataset_code: 'Q1_2025',
        column_mapping: validMapping,
        csv_data: validRows,
        csv_headers: validHeaders,
      });
    
    expect(response.status).toBe(201);
    expect(response.body.import_id).toBeDefined();
  });

  it('powinien zwrÃ³ciÄ‡ bÅ‚Ä™dy walidacji dla bÅ‚Ä™dnych danych', async () => {
    const response = await authenticatedRequest(app)
      .post(`/api/companies/${companyId}/imports`)
      .send({
        dataset_code: 'Q1_2025',
        column_mapping: validMapping,
        csv_data: [['invalid-date', 'INFLOW', 'not-a-number']],
        csv_headers: validHeaders,
      });
    
    expect(response.body.errors).toBeDefined();
    expect(response.body.errors.length).toBeGreaterThan(0);
  });
});
```

### 3.4. Testy E2E (End-to-End Tests)

**Zakres:**
- Kompletne scenariusze uÅ¼ytkownika
- Interakcje UI
- PrzepÅ‚yw danych od frontendu do bazy danych

**Framework:** Playwright
**Åšrodowisko:** Lokalne + staging

**PrzykÅ‚adowe scenariusze:**

#### 3.4.1. PeÅ‚ny przepÅ‚yw importu CSV
```typescript
// tests/e2e/import-flow.spec.ts
test('uÅ¼ytkownik moÅ¼e zaimportowaÄ‡ CSV i utworzyÄ‡ scenariusz', async ({ page }) => {
  // 1. Zaloguj siÄ™
  await page.goto('/auth/login');
  await page.fill('[name="email"]', 'user@example.com');
  await page.fill('[name="password"]', 'password123');
  await page.click('button[type="submit"]');
  
  // 2. PrzejdÅº do importu
  await page.goto('/import');
  
  // 3. Wybierz plik
  await page.setInputFiles('[type="file"]', 'test-data.csv');
  await page.fill('[name="dataset_code"]', 'Q1_2025');
  await page.click('text=Next');
  
  // 4. Mapuj kolumny
  await page.selectOption('[name="date_due"]', 'Data');
  await page.selectOption('[name="direction"]', 'Typ');
  await page.selectOption('[name="amount_book_cents"]', 'Kwota');
  await page.click('text=Next');
  
  // 5. Waliduj
  await page.click('text=Validate');
  await page.waitForSelector('text=Validation complete');
  
  // 6. UtwÃ³rz scenariusz
  await page.click('text=Create Scenario');
  await page.waitForURL(/scenarios\/\d+/);
  
  // 7. SprawdÅº czy scenariusz zostaÅ‚ utworzony
  await expect(page.locator('h1')).toContainText('Import Q1_2025');
});
```

#### 3.4.2. Edycja transakcji w scenariuszu
```typescript
// tests/e2e/scenario-edit.spec.ts
test('uÅ¼ytkownik moÅ¼e modyfikowaÄ‡ transakcjÄ™ w scenariuszu', async ({ page }) => {
  await loginAs(page, 'user@example.com');
  await page.goto(`/scenarios/${scenarioId}`);
  
  // ZnajdÅº transakcjÄ™
  const transaction = page.locator('[data-testid="transaction-card"]').first();
  await transaction.click();
  
  // Edytuj kwotÄ™
  await page.fill('[name="amount"]', '500');
  await page.fill('[name="date_due"]', '2025-02-15');
  await page.click('text=Save');
  
  // SprawdÅº czy zmiana zostaÅ‚a zapisana
  await expect(transaction).toContainText('500');
  await expect(transaction).toContainText('2025-02-15');
});
```

#### 3.4.3. Eksport scenariusza do Excel
```typescript
// tests/e2e/export.spec.ts
test('uÅ¼ytkownik moÅ¼e wyeksportowaÄ‡ scenariusz do Excel', async ({ page }) => {
  await loginAs(page, 'user@example.com');
  await page.goto(`/scenarios/${scenarioId}`);
  
  // Kliknij eksport
  const downloadPromise = page.waitForEvent('download');
  await page.click('text=Export');
  const download = await downloadPromise;
  
  // SprawdÅº nazwÄ™ pliku
  expect(download.suggestedFilename()).toMatch(/scenario_.*\.xlsx/);
});
```

### 3.5. Testy WydajnoÅ›ciowe (Performance Tests)

**Zakres:**
- Czas odpowiedzi API
- Czas Å‚adowania komponentÃ³w
- WydajnoÅ›Ä‡ agregacji SQL
- Czas importu duÅ¼ych plikÃ³w CSV

**Framework:** k6, Lighthouse

**PrzykÅ‚adowe przypadki:**

#### 3.5.1. Import duÅ¼ego pliku CSV
```typescript
// tests/performance/import.test.ts
test('import 10,000 transakcji powinien zakoÅ„czyÄ‡ siÄ™ w < 30s', async () => {
  const startTime = Date.now();
  
  const response = await fetch(`/api/companies/${companyId}/imports`, {
    method: 'POST',
    body: JSON.stringify({
      dataset_code: 'LARGE_Q1',
      csv_data: generate10kRows(),
      column_mapping: validMapping,
    }),
  });
  
  const duration = Date.now() - startTime;
  expect(duration).toBeLessThan(30000);
  expect(response.status).toBe(201);
});
```

#### 3.5.2. Agregacje tygodniowe
```javascript
// tests/performance/aggregations.k6.js
import http from 'k6/http';
import { check } from 'k6';

export let options = {
  vus: 10,
  duration: '30s',
};

export default function () {
  const res = http.get(
    `${BASE_URL}/api/companies/${COMPANY_ID}/scenarios/${SCENARIO_ID}/analytics/weekly`
  );
  
  check(res, {
    'status is 200': (r) => r.status === 200,
    'response time < 500ms': (r) => r.timings.duration < 500,
  });
}
```

#### 3.5.3. Lighthouse - Performance audit
```bash
# Cel: Performance Score > 90
lighthouse https://app.example.com/scenarios/123 \
  --only-categories=performance \
  --output=json \
  --output-path=./lighthouse-results.json
```

### 3.6. Testy BezpieczeÅ„stwa (Security Tests)

**Zakres:**
- Weryfikacja RLS policies
- Injection attacks (SQL, XSS)
- CSRF protection
- Rate limiting
- Session management

**PrzykÅ‚adowe przypadki:**

#### 3.6.1. SQL Injection
```typescript
// tests/security/sql-injection.test.ts
test('endpoint powinien byÄ‡ odporny na SQL injection', async () => {
  const maliciousInput = "'; DROP TABLE scenarios; --";
  
  const response = await request(app)
    .post(`/api/companies/${companyId}/scenarios`)
    .send({
      name: maliciousInput,
      dataset_code: 'Q1_2025',
      // ...
    });
  
  // Powinien odrzuciÄ‡ lub zesanityzowaÄ‡ input
  expect(response.status).not.toBe(500);
  
  // SprawdÅº czy tabela nadal istnieje
  const { data } = await supabase.from('scenarios').select('count');
  expect(data).toBeDefined();
});
```

#### 3.6.2. Unauthorized access
```typescript
// tests/security/authorization.test.ts
test('uÅ¼ytkownik nie moÅ¼e uzyskaÄ‡ dostÄ™pu do scenariuszy innej firmy', async () => {
  const response = await authenticatedRequest(app, user1Token)
    .get(`/api/companies/${company2Id}/scenarios`);
  
  expect(response.status).toBe(403);
});

test('niezalogowany uÅ¼ytkownik nie moÅ¼e tworzyÄ‡ scenariuszy', async () => {
  const response = await request(app)
    .post(`/api/companies/${companyId}/scenarios`)
    .send(validScenarioData);
  
  expect(response.status).toBe(401);
});
```

### 3.7. Testy KomponentÃ³w UI (Component Tests)

**Zakres:**
- Komponenty React
- Komponenty Astro
- Custom hooks

**Framework:** Vitest + React Testing Library

**PrzykÅ‚adowe przypadki:**

#### 3.7.1. ImportWizard component
```typescript
// src/components/import/ImportWizard.test.tsx
describe('ImportWizard', () => {
  it('powinien przejÅ›Ä‡ przez wszystkie kroki importu', async () => {
    const { getByText, getByLabelText } = render(
      <ImportWizard companyId="123" />
    );
    
    // Krok 1: Upload
    expect(getByText('Upload CSV File')).toBeInTheDocument();
    
    const fileInput = getByLabelText('File');
    await userEvent.upload(fileInput, testFile);
    await userEvent.click(getByText('Next'));
    
    // Krok 2: Mapping
    expect(getByText('Map Columns')).toBeInTheDocument();
    // ...
  });
});
```

#### 3.7.2. useScenarios hook
```typescript
// src/components/hooks/useScenarios.test.ts
describe('useScenarios', () => {
  it('powinien zaÅ‚adowaÄ‡ scenariusze przy montowaniu', async () => {
    const { result, waitForNextUpdate } = renderHook(() =>
      useScenarios(companyId)
    );
    
    expect(result.current.isLoading).toBe(true);
    
    await waitForNextUpdate();
    
    expect(result.current.isLoading).toBe(false);
    expect(result.current.scenarios.length).toBeGreaterThan(0);
  });
});
```

### 3.8. Testy Regresji (Regression Tests)

**Zakres:**
- Weryfikacja poprawek bugÃ³w
- Sprawdzenie, czy nowe zmiany nie zÅ‚amaÅ‚y istniejÄ…cej funkcjonalnoÅ›ci

**Proces:**
- Automatyczne uruchamianie peÅ‚nego zestawu testÃ³w przed kaÅ¼dym releasem
- Testy smoke po deploymencie

## 4. Scenariusze Testowe dla Kluczowych FunkcjonalnoÅ›ci

### 4.1. Autentykacja i Autoryzacja

| ID | Scenariusz | Dane wejÅ›ciowe | Oczekiwany rezultat |
|----|------------|----------------|---------------------|
| AUTH-001 | Rejestracja nowego uÅ¼ytkownika | Email: user@test.com, Password: Test123! | Utworzenie konta, wysÅ‚anie email weryfikacyjnego |
| AUTH-002 | Logowanie z poprawnymi danymi | Email: user@test.com, Password: Test123! | Status 200, otrzymanie access_token |
| AUTH-003 | Logowanie z bÅ‚Ä™dnym hasÅ‚em | Email: user@test.com, Password: wrong | Status 401, komunikat bÅ‚Ä™du |
| AUTH-004 | Wylogowanie | Access token | UsuniÄ™cie sesji, status 200 |
| AUTH-005 | Reset hasÅ‚a | Email: user@test.com | WysÅ‚anie linku resetujÄ…cego |
| AUTH-006 | DostÄ™p bez tokenu | Brak Authorization header | Status 401 |
| AUTH-007 | DostÄ™p z wygasÅ‚ym tokenem | WygasÅ‚y token | Status 401, refresh lub redirect |

### 4.2. Import CSV

| ID | Scenariusz | Dane wejÅ›ciowe | Oczekiwany rezultat |
|----|------------|----------------|---------------------|
| IMP-001 | Import poprawnego pliku CSV | Plik z 100 wierszami, poprawne mapowanie | Status 201, 100 transakcji, 0 bÅ‚Ä™dÃ³w |
| IMP-002 | Import z bÅ‚Ä™dnymi datami | Wiersz z datÄ… "32-01-2025" | Wiersz odrzucony, raport bÅ‚Ä™du |
| IMP-003 | Import z pustymi polami wymaganymi | Wiersz bez kwoty | Wiersz odrzucony z informacjÄ… o bÅ‚Ä™dzie |
| IMP-004 | Import duÅ¼ego pliku (10k wierszy) | CSV z 10,000 wierszami | Wszystkie wiersze przetworzone, < 30s |
| IMP-005 | Import z duplikatami | Te same transakcje 2x | Wszystkie zaimportowane (brak constraint) |
| IMP-006 | Import bez mapowania kolumn | Brak column_mapping | Status 400, bÅ‚Ä…d walidacji |
| IMP-007 | Import z nieobsÅ‚ugiwanÄ… walutÄ… | Currency: "XXX" | Wiersz odrzucony lub uÅ¼ywa domyÅ›lnej waluty |
| IMP-008 | Import z ujemnymi kwotami INFLOW | Direction: INFLOW, Amount: -100 | Wiersz odrzucony, bÅ‚Ä…d walidacji |
| IMP-009 | Przerwanie importu w trakcie | Anulowanie podczas processingu | Import oznaczony jako "failed" |

### 4.3. ZarzÄ…dzanie Scenariuszami

| ID | Scenariusz | Dane wejÅ›ciowe | Oczekiwany rezultat |
|----|------------|----------------|---------------------|
| SCN-001 | Utworzenie scenariusza bazowego | Import_id, nazwa, zakres dat | Status 201, nowy scenariusz w Draft |
| SCN-002 | Utworzenie scenariusza pochodnego | Base_scenario_id, nowa nazwa | Scenariusz z referencjÄ… do base, Draft |
| SCN-003 | Duplikacja scenariusza | Scenario_id, nowa nazwa | Kopia z wszystkimi override'ami |
| SCN-004 | Edycja nazwy scenariusza Draft | Nowa nazwa | Zaktualizowana nazwa |
| SCN-005 | Edycja scenariusza Locked | Nowa nazwa | Status 403 lub 409, brak zmian |
| SCN-006 | Zablokowanie scenariusza | Scenario_id (Draft) | Status zmieniony na Locked |
| SCN-007 | Zablokowanie juÅ¼ zablokowanego | Scenario_id (Locked) | Status 409, komunikat o konflikcie |
| SCN-008 | UsuniÄ™cie scenariusza Draft | Scenario_id (Draft) | Soft delete, is_deleted = true |
| SCN-009 | UsuniÄ™cie scenariusza Locked | Scenario_id (Locked) | Status 403, brak usuniÄ™cia |
| SCN-010 | Filtrowanie po statusie | Status: "Draft" | Tylko scenariusze Draft |
| SCN-011 | Filtrowanie po dataset_code | Dataset_code: "Q1_2025" | Tylko scenariusze z Q1_2025 |
| SCN-012 | Paginacja listy scenariuszy | Page: 2, limit: 20 | Scenariusze 21-40 |
| SCN-013 | Scenariusz z datami w zÅ‚ej kolejnoÅ›ci | Start: 2025-03-31, End: 2025-01-01 | Status 400, bÅ‚Ä…d walidacji |

### 4.4. Overrides Transakcji

| ID | Scenariusz | Dane wejÅ›ciowe | Oczekiwany rezultat |
|----|------------|----------------|---------------------|
| OVR-001 | Utworzenie override dla transakcji | Transaction_id, new_amount | Override utworzony, widoczny w scenario_transactions_v |
| OVR-002 | Modyfikacja daty transakcji | Transaction_id, new_date_due | Data zmieniona w widoku |
| OVR-003 | UsuniÄ™cie override | Override_id | Override usuniÄ™ty, transakcja wraca do oryginaÅ‚u |
| OVR-004 | Override w zablokowanym scenariuszu | Scenario_id (Locked), transaction_id | Status 403, brak zmian |
| OVR-005 | Batch update overrides | Array[{transaction_id, new_amount}] | Wszystkie overrides zaktualizowane |
| OVR-006 | Override kwoty na 0 | New_amount: 0 | Override zaakceptowany (0 jest poprawne) |
| OVR-007 | Override z ujemnÄ… kwotÄ… | New_amount: -100 | Status 400, bÅ‚Ä…d walidacji |

### 4.5. Widoki Analityczne

| ID | Scenariusz | Dane wejÅ›ciowe | Oczekiwany rezultat |
|----|------------|----------------|---------------------|
| ANA-001 | Agregaty tygodniowe | Scenario_id | Lista tygodni z sumami inflow/outflow |
| ANA-002 | Top-5 inflows | Scenario_id, week | 5 najwiÄ™kszych wpÅ‚ywÃ³w + Other |
| ANA-003 | Top-5 outflows | Scenario_id, week | 5 najwiÄ™kszych wypÅ‚ywÃ³w + Other |
| ANA-004 | Running balance | Scenario_id | Chronologiczna lista z running_balance |
| ANA-005 | PorÃ³wnanie scenariuszy | Array[scenario_ids] | Dane wszystkich scenariuszy |
| ANA-006 | PorÃ³wnanie > 5 scenariuszy | Array z 6+ ID | Status 400, limit exceeded |
| ANA-007 | Filtrowanie po dacie | Date_from, date_to | Tylko transakcje w zakresie |
| ANA-008 | Konwersja walut w agregacji | Multi-currency transactions | Wszystko w base_currency |

### 4.6. Eksport

| ID | Scenariusz | Dane wejÅ›ciowe | Oczekiwany rezultat |
|----|------------|----------------|---------------------|
| EXP-001 | Eksport scenariusza do Excel | Scenario_id | Plik .xlsx z transakcjami |
| EXP-002 | Eksport z grupowaniem po tygodniach | Group_by: "week" | Arkusz z agregacjami tygodniowymi |
| EXP-003 | Eksport z wykresem | Include_chart: true | Plik z arkuszem wykresu |
| EXP-004 | Eksport duÅ¼ego scenariusza (10k+) | Scenario_id z 10k transakcji | Plik wygenerowany w < 10s |
| EXP-005 | Eksport z filtrami dat | Date_from, date_to | Tylko transakcje w zakresie |

### 4.7. Multi-tenancy

| ID | Scenariusz | Dane wejÅ›ciowe | Oczekiwany rezultat |
|----|------------|----------------|---------------------|
| TEN-001 | UÅ¼ytkownik widzi tylko swoje firmy | User_id | Lista firm, do ktÃ³rych naleÅ¼y |
| TEN-002 | DostÄ™p do scenariusza innej firmy | Company_id (nie naleÅ¼y) | Status 403 |
| TEN-003 | Dodanie czÅ‚onka do firmy | User_id, company_id | Nowy rekord w company_members |
| TEN-004 | UsuniÄ™cie czÅ‚onka | User_id, company_id | UsuniÄ™cie rekordu |
| TEN-005 | Izolacja danych miÄ™dzy firmami | 2 firmy, te same dataset_code | Brak przeciekania danych |

## 5. Åšrodowisko Testowe

### 5.1. Åšrodowiska

| Åšrodowisko | Cel | URL | Database |
|------------|-----|-----|----------|
| **Local** | Development & unit tests | http://localhost:4321 | Supabase local |
| **Staging** | Integration & E2E tests | https://staging.example.com | Supabase staging |
| **Production** | Smoke tests | https://app.example.com | Supabase production |

### 5.2. Konfiguracja Å›rodowiska testowego

#### 5.2.1. Lokalne Å›rodowisko
```bash
# Uruchomienie Supabase lokalnie
supabase start

# Migracje
supabase db reset

# Seeding danych testowych
psql -h localhost -p 54322 -U postgres -d postgres -f supabase/seed.sql

# Uruchomienie aplikacji
npm run dev
```

#### 5.2.2. Dane testowe
- **Firmy:** 3 testowe firmy z rÃ³Å¼nymi walutami bazowymi
- **UÅ¼ytkownicy:** 5 uÅ¼ytkownikÃ³w z rÃ³Å¼nymi rolami
- **Importy:** 2 ukoÅ„czone importy na firmÄ™
- **Scenariusze:** 5 scenariuszy (3 Draft, 2 Locked) na import
- **Transakcje:** ~1000 transakcji na import
- **Overrides:** 50 override'Ã³w w rÃ³Å¼nych scenariuszach

### 5.3. Konfiguracja bazy danych testowej

```sql
-- Reset before each test suite
TRUNCATE TABLE 
  scenario_overrides,
  scenarios,
  transactions,
  import_rows,
  imports,
  accounts,
  company_members,
  companies,
  user_profiles
CASCADE;

-- Seed test data
INSERT INTO companies (id, name, base_currency) VALUES
  ('11111111-1111-1111-1111-111111111111', 'Test Company A', 'PLN'),
  ('22222222-2222-2222-2222-222222222222', 'Test Company B', 'EUR'),
  ('33333333-3333-3333-3333-333333333333', 'Test Company C', 'USD');
```

## 6. NarzÄ™dzia do Testowania

### 6.1. Framework'i testowe

| NarzÄ™dzie | Wersja | Zastosowanie |
|-----------|--------|--------------|
| **Vitest** | ^2.0.0 | Testy jednostkowe, integracyjne |
| **React Testing Library** | ^16.0.0 | Testy komponentÃ³w React |
| **Playwright** | ^1.48.0 | Testy E2E |
| **k6** | latest | Testy wydajnoÅ›ciowe |
| **Lighthouse** | latest | Audyt performance/accessibility |
| **Zod** | ^3.23.0 | Walidacja schematÃ³w (uÅ¼ywane w testach) |

### 6.2. NarzÄ™dzia pomocnicze

- **Supabase CLI** - zarzÄ…dzanie lokalnÄ… bazÄ… danych
- **MSW (Mock Service Worker)** - mockowanie API w testach
- **Faker.js** - generowanie danych testowych
- **Supertest** - testowanie HTTP endpoints
- **Istanbul/c8** - code coverage

### 6.3. CI/CD Integration

```yaml
# .github/workflows/test.yml
name: Test Suite

on: [push, pull_request]

jobs:
  unit-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
      - run: npm ci
      - run: npm run test:unit
      - run: npm run test:coverage
  
  integration-tests:
    runs-on: ubuntu-latest
    services:
      postgres:
        image: supabase/postgres
    steps:
      - uses: actions/checkout@v3
      - run: supabase start
      - run: npm run test:integration
  
  e2e-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npx playwright install
      - run: npm run test:e2e
```

## 7. Harmonogram TestÃ³w

### 7.1. Fazy testowania

| Faza | Typy testÃ³w | Czas trwania | Odpowiedzialny |
|------|-------------|--------------|----------------|
| **Faza 1: Unit Tests** | Testy jednostkowe walidacji, utils, parsery | 1 tydzieÅ„ | Deweloperzy |
| **Faza 2: Integration** | Serwisy, RLS, API routes | 1 tydzieÅ„ | QA + Deweloperzy |
| **Faza 3: API Tests** | Wszystkie endpointy REST | 3 dni | QA |
| **Faza 4: UI Components** | Komponenty React/Astro | 3 dni | Frontend Dev |
| **Faza 5: E2E** | Kompletne scenariusze uÅ¼ytkownika | 1 tydzieÅ„ | QA |
| **Faza 6: Performance** | Load testing, optimalizacja | 3 dni | DevOps + QA |
| **Faza 7: Security** | RLS, injection, auth | 3 dni | Security specialist |
| **Faza 8: UAT** | User Acceptance Testing | 1 tydzieÅ„ | Klient + PM |

### 7.2. Harmonogram wdroÅ¼enia

```
TydzieÅ„ 1-2: Setup + Unit Tests
â”‚
â”œâ”€ DzieÅ„ 1-2: Konfiguracja Å›rodowiska testowego
â”œâ”€ DzieÅ„ 3-5: Testy walidacji i utils
â””â”€ DzieÅ„ 6-10: Testy serwisÃ³w i parsery

TydzieÅ„ 3-4: Integration + API Tests
â”‚
â”œâ”€ DzieÅ„ 11-15: Testy integracyjne (RLS, serwisy)
â””â”€ DzieÅ„ 16-18: Testy API endpoints

TydzieÅ„ 5-6: UI + E2E Tests
â”‚
â”œâ”€ DzieÅ„ 19-21: Testy komponentÃ³w
â””â”€ DzieÅ„ 22-28: Testy E2E

TydzieÅ„ 7: Performance + Security
â”‚
â”œâ”€ DzieÅ„ 29-31: Testy wydajnoÅ›ciowe
â””â”€ DzieÅ„ 32-34: Testy bezpieczeÅ„stwa

TydzieÅ„ 8: UAT + Bug Fixing
â”‚
â”œâ”€ DzieÅ„ 35-38: User Acceptance Testing
â””â”€ DzieÅ„ 39-40: Poprawki bugÃ³w i retesting
```

### 7.3. CzÄ™stotliwoÅ›Ä‡ uruchamiania testÃ³w

| Typ testÃ³w | CzÄ™stotliwoÅ›Ä‡ | Trigger |
|------------|---------------|---------|
| Unit Tests | Przy kaÅ¼dym commit | Pre-commit hook |
| Integration Tests | Przy kaÅ¼dym push | GitHub Actions |
| API Tests | Przy kaÅ¼dym push | GitHub Actions |
| E2E Tests | Przed merge do main | GitHub Actions (PR) |
| Performance Tests | Tygodniowo | Scheduled CI job |
| Security Tests | Przed releasem | Manual trigger |
| Regression Tests | Przed kaÅ¼dym releasem | Manual + CI |

## 8. Kryteria Akceptacji TestÃ³w

### 8.1. Kryteria wyjÅ›cia (Exit Criteria)

Testy uznaje siÄ™ za zakoÅ„czone pomyÅ›lnie, gdy:

1. **Code Coverage:**
   - âœ… Unit tests: â‰¥ 80% coverage
   - âœ… Integration tests: â‰¥ 70% coverage kluczowych serwisÃ³w
   - âœ… API tests: 100% endpointÃ³w przetestowanych

2. **PrzejÅ›cia testÃ³w:**
   - âœ… 100% testÃ³w jednostkowych przechodzi
   - âœ… â‰¥ 95% testÃ³w integracyjnych przechodzi
   - âœ… â‰¥ 90% testÃ³w E2E przechodzi
   - âœ… 0 bÅ‚Ä™dÃ³w krytycznych (P0)
   - âœ… â‰¤ 5 bÅ‚Ä™dÃ³w wysokiego priorytetu (P1)

3. **WydajnoÅ›Ä‡:**
   - âœ… Import 1000 transakcji: < 5s
   - âœ… Import 10,000 transakcji: < 30s
   - âœ… Czas odpowiedzi API (P95): < 500ms
   - âœ… Lighthouse Performance Score: â‰¥ 90
   - âœ… Time to Interactive (TTI): < 3s

4. **BezpieczeÅ„stwo:**
   - âœ… Wszystkie RLS policies dziaÅ‚ajÄ… poprawnie
   - âœ… Brak luk SQL injection
   - âœ… Brak luk XSS
   - âœ… Proper session management
   - âœ… HTTPS enforced w production

5. **FunkcjonalnoÅ›Ä‡:**
   - âœ… Wszystkie kluczowe scenariusze uÅ¼ytkownika dziaÅ‚ajÄ…
   - âœ… Import CSV dziaÅ‚a dla rÃ³Å¼nych formatÃ³w
   - âœ… Eksport Excel generuje poprawne pliki
   - âœ… RLS zapewnia izolacjÄ™ danych miÄ™dzy firmami
   - âœ… Overrides poprawnie modyfikujÄ… transakcje

### 8.2. Priorytety bÅ‚Ä™dÃ³w

| Priorytet | Opis | SLA naprawy | PrzykÅ‚ad |
|-----------|------|-------------|----------|
| **P0 - Krytyczny** | Blokuje release, utrata danych | 24h | Utrata transakcji po imporcie |
| **P1 - Wysoki** | GÅ‚Ã³wna funkcjonalnoÅ›Ä‡ nie dziaÅ‚a | 3 dni | Import CSV zawsze failuje |
| **P2 - Åšredni** | FunkcjonalnoÅ›Ä‡ dziaÅ‚a czÄ™Å›ciowo | 1 tydzieÅ„ | Eksport Excel bez wykresÃ³w |
| **P3 - Niski** | Drobne problemy UI/UX | 2 tygodnie | BÅ‚Ä™dne formatowanie dat |
| **P4 - Kosmetyczny** | Nie wpÅ‚ywa na funkcjonalnoÅ›Ä‡ | Backlog | LiterÃ³wka w tooltipie |

### 8.3. Metryki jakoÅ›ci

**Defect Density:**
- Target: < 5 defektÃ³w na 1000 linii kodu

**Test Execution Rate:**
- Target: â‰¥ 95% zaplanowanych testÃ³w wykonanych

**Defect Detection Percentage (DDP):**
- Target: â‰¥ 85% defektÃ³w wykrytych przed UAT

**Mean Time To Repair (MTTR):**
- P0: < 24h
- P1: < 72h
- P2: < 7 dni

## 9. Role i OdpowiedzialnoÅ›ci w Procesie Testowania

### 9.1. ZespÃ³Å‚ testowy

| Rola | OdpowiedzialnoÅ›ci | Liczba osÃ³b |
|------|-------------------|-------------|
| **QA Lead** | Koordynacja testÃ³w, strategia, raportowanie | 1 |
| **QA Engineer** | Wykonywanie testÃ³w, automatyzacja | 2 |
| **Developer** | Testy jednostkowe, code reviews, bug fixing | 3 |
| **DevOps Engineer** | CI/CD, Å›rodowiska testowe, performance | 1 |
| **Security Specialist** | Testy bezpieczeÅ„stwa, RLS, audyt | 1 (konsultant) |
| **Product Owner** | UAT, akceptacja funkcjonalnoÅ›ci | 1 |

### 9.2. PodziaÅ‚ odpowiedzialnoÅ›ci

#### QA Lead
- âœ… Tworzenie i utrzymanie planu testÃ³w
- âœ… Definiowanie strategii testowania
- âœ… Raportowanie statusu testÃ³w do stakeholderÃ³w
- âœ… ZarzÄ…dzanie bÅ‚Ä™dami i priorytetami
- âœ… Koordynacja z zespoÅ‚em deweloperskim
- âœ… Finalna akceptacja release'u

#### QA Engineer
- âœ… Projektowanie przypadkÃ³w testowych
- âœ… Automatyzacja testÃ³w (API, E2E)
- âœ… Wykonywanie testÃ³w manualnych
- âœ… Raportowanie bÅ‚Ä™dÃ³w
- âœ… Retesting po naprawach
- âœ… Utrzymanie test data

#### Developer
- âœ… Pisanie testÃ³w jednostkowych
- âœ… Testy integracyjne dla serwisÃ³w
- âœ… Naprawianie bÅ‚Ä™dÃ³w
- âœ… Code reviews z perspektywÄ… testability
- âœ… Wsparcie QA w debugowaniu
- âœ… Dokumentacja techniczna

#### DevOps Engineer
- âœ… Konfiguracja CI/CD pipeline
- âœ… Utrzymanie Å›rodowisk testowych
- âœ… Testy wydajnoÅ›ciowe (k6)
- âœ… Monitoring i logi
- âœ… Automatyzacja deploymentÃ³w
- âœ… Infrastruktura as Code

#### Security Specialist
- âœ… Audyt RLS policies
- âœ… Testy penetracyjne
- âœ… Analiza podatnoÅ›ci
- âœ… Review kodu z perspektywy bezpieczeÅ„stwa
- âœ… Rekomendacje security best practices

#### Product Owner
- âœ… Definiowanie kryteriÃ³w akceptacji
- âœ… User Acceptance Testing
- âœ… Priorytetyzacja bÅ‚Ä™dÃ³w
- âœ… Akceptacja funkcjonalnoÅ›ci
- âœ… Feedback uÅ¼ytkownikÃ³w koÅ„cowych

### 9.3. RACI Matrix

| AktywnoÅ›Ä‡ | QA Lead | QA Eng | Dev | DevOps | Security | PO |
|-----------|---------|--------|-----|--------|----------|-----|
| Plan testÃ³w | A | C | C | C | C | R |
| Testy jednostkowe | I | C | A/R | I | - | - |
| Testy API | C | A/R | C | I | - | I |
| Testy E2E | A | R | C | C | - | I |
| Testy wydajnoÅ›ci | C | C | I | A/R | - | I |
| Testy bezpieczeÅ„stwa | C | C | C | C | A/R | I |
| Bug fixing | A | I | R | C | C | C |
| UAT | C | C | I | - | - | A/R |
| Release decision | C | C | I | I | C | A/R |

**Legenda:**
- R = Responsible (wykonuje)
- A = Accountable (odpowiedzialny)
- C = Consulted (konsultowany)
- I = Informed (informowany)

## 10. Procedury Raportowania BÅ‚Ä™dÃ³w

### 10.1. Proces zgÅ‚aszania bÅ‚Ä™dÃ³w

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Wykrycie bÅ‚Ä™du   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Weryfikacja      â”‚
â”‚   - Czy to bug?     â”‚
â”‚   - Reprodukcja     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Utworzenie ticketâ”‚
â”‚   w GitHub Issues   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Przypisanie      â”‚
â”‚   priorytetu i dev  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Naprawa + PR     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. Retesting        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 7. ZamkniÄ™cie lub   â”‚
â”‚    Reopening        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 10.2. Template zgÅ‚oszenia bÅ‚Ä™du

```markdown
## ðŸ› Bug Report

**TytuÅ‚:** [Komponent] KrÃ³tki opis problemu

**Priorytet:** P0 / P1 / P2 / P3 / P4

**Åšrodowisko:**
- Wersja: v1.2.3
- PrzeglÄ…darka: Chrome 120
- System: Ubuntu 22.04

**Kroki reprodukcji:**
1. Zaloguj siÄ™ jako user@test.com
2. PrzejdÅº do /import
3. Wgraj plik test.csv
4. Kliknij "Next"

**Oczekiwane zachowanie:**
Plik powinien zostaÄ‡ przesÅ‚any i pokazany podglÄ…d.

**Aktualne zachowanie:**
BÅ‚Ä…d 500, komunikat "Internal Server Error".

**Logi/Screenshots:**
```
Error: Failed to parse CSV
  at parseFullCSV (csv-import.ts:12)
  ...
```

**Dodatkowe informacje:**
- WystÄ™puje tylko dla plikÃ³w > 5MB
- Nie wystÄ™puje w Å›rodowisku lokalnym
```

### 10.3. NarzÄ™dzia do Å›ledzenia bÅ‚Ä™dÃ³w

**Primary:** GitHub Issues
- Labels: `bug`, `P0`, `P1`, `P2`, `P3`, `frontend`, `backend`, `database`
- Milestones: v1.0, v1.1, etc.
- Projects: Kanban board (To Do, In Progress, Review, Done)

**Secondary:** Notion/Confluence
- Test execution reports
- Test plans
- Release notes

### 10.4. Workflow w GitHub

```yaml
# Labels
bug: Defekt wymagajÄ…cy naprawy
enhancement: Nowa funkcjonalnoÅ›Ä‡
documentation: Aktualizacja dokumentacji
P0: Krytyczny
P1: Wysoki priorytet
P2: Åšredni priorytet
P3: Niski priorytet
frontend: Problem UI/UX
backend: Problem API/serwisÃ³w
database: Problem SQL/migracji
security: PodatnoÅ›Ä‡ bezpieczeÅ„stwa
performance: Problem wydajnoÅ›ciowy

# Workflow
1. Issue created â†’ `To Do`
2. Developer assigned â†’ `In Progress`
3. PR created â†’ `In Review`
4. PR merged â†’ `Testing`
5. QA verified â†’ `Done`
```

### 10.5. Raporty testowe

**Dzienny raport:**
```markdown
# Daily Test Report - 2025-01-12

## Test Execution
- âœ… Executed: 156 tests
- âœ… Passed: 148 tests (94.9%)
- âŒ Failed: 8 tests (5.1%)
- â­ï¸ Skipped: 0 tests

## New Bugs
- #234 [P1] Import fails for files > 5MB
- #235 [P2] Export button disabled after scenario lock

## Resolved Bugs
- #220 [P1] Scenario duplication creates empty overrides âœ…
- #228 [P3] Date formatting incorrect in timeline âœ…

## Blockers
- Staging environment down (11:00-12:30)

## Next Steps
- Complete E2E suite for exports
- Retest #220, #228
```

**Tygodniowy raport:**
```markdown
# Weekly Test Report - Week 2, 2025

## Summary
- Total tests executed: 1,240
- Pass rate: 94.2%
- Bugs filed: 12
- Bugs resolved: 15
- Code coverage: 82%

## Test Progress
- Unit Tests: âœ… 100% complete
- Integration Tests: âœ… 100% complete
- API Tests: âœ… 100% complete
- E2E Tests: ðŸŸ¡ 75% complete
- Performance Tests: ðŸ”´ 50% complete

## Key Metrics
- Defect Density: 3.2 per 1000 LOC
- MTTR (P1): 48h average
- Test Automation: 87%

## Risks & Concerns
- Performance tests show degradation for 10k+ imports
- E2E tests flaky in CI environment

## Action Items
- [ ] Optimize import service (performance)
- [ ] Stabilize E2E tests in CI
- [ ] Complete remaining E2E scenarios
```

---

## 11. Podsumowanie

Niniejszy plan testÃ³w zapewnia kompleksowe pokrycie testowe dla projektu CashFlow Scenarios MVP, uwzglÄ™dniajÄ…c:

âœ… **WielowarstwowÄ… strategiÄ™ testowania** - od testÃ³w jednostkowych po E2E
âœ… **BezpieczeÅ„stwo** - RLS policies, injection attacks, autoryzacjÄ™
âœ… **WydajnoÅ›Ä‡** - testy dla duÅ¼ych zbiorÃ³w danych
âœ… **JakoÅ›Ä‡** - wysokie pokrycie kodu i automatyzacjÄ™
âœ… **Proces** - jasny workflow i odpowiedzialnoÅ›ci

**Kluczowe wskaÅºniki sukcesu:**
- Code coverage â‰¥ 80%
- Pass rate â‰¥ 95%
- Performance: API < 500ms, Import 10k < 30s
- 0 bÅ‚Ä™dÃ³w krytycznych przed release
- Lighthouse score â‰¥ 90

**NastÄ™pne kroki:**
1. Konfiguracja Å›rodowiska testowego (Vitest, Playwright)
2. Implementacja testÃ³w jednostkowych dla utils i walidacji
3. Testy integracyjne dla serwisÃ³w
4. Automatyzacja testÃ³w API
5. Testy E2E dla kluczowych user flows
6. Continuous testing w CI/CD pipeline

Ten plan testÃ³w bÄ™dzie aktualizowany wraz z rozwojem projektu i pojawianiem siÄ™ nowych funkcjonalnoÅ›ci.

---

**Wersja:** 1.0  
**Data utworzenia:** 2025-01-12  
**Autor:** QA Team  
**Status:** Draft â†’ Do zatwierdzenia przez Product Owner
