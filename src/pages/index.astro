---
import Layout from "../layouts/Layout.astro";
import ScenarioViewWithProvider from "../components/scenario/ScenarioViewWithProvider";

export const prerender = false;

// Check if user is logged in
const user = Astro.locals.user;

// If user is logged in, redirect to scenarios dashboard
if (user) {
  return Astro.redirect("/scenarios");
}

// For non-authenticated users, show demo scenario
const DEMO_BASE_CURRENCY = "USD";
---

<Layout title="Demo - CashFlow Scenarios">
  <main class="h-screen w-full overflow-hidden bg-background">
    <ScenarioViewWithProvider client:only="react" baseCurrency={DEMO_BASE_CURRENCY} />
  </main>
</Layout>
